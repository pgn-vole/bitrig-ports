# $OpenBSD: Makefile,v 1.6 2015/05/18 16:43:52 sthen Exp $

PORTROACH=	limit:^5\.1

VERSION=	5.1.5
PKGSPEC=	lua->=5.1,<5.2
REVISION=	4

SHARED_LIBS=	lua5.1 ${VERSION:R}

LIB_DEPENDS=	devel/readline

WANTLIB=	c m edit curses readline

MAKE_FLAGS+=	LIBlua5.1_VERSION="${LIBlua5.1_VERSION}"

CFLAGS+= 	-I${LOCALBASE}/include

pre-configure:
	${SUBST_CMD} ${WRKSRC}/etc/lua.pc

post-install:
	${INSTALL_DATA_DIR} ${PREFIX}/lib/pkgconfig
	${INSTALL_DATA} ${WRKSRC}/etc/lua.pc ${PREFIX}/lib/pkgconfig/lua51.pc

.include <bsd.port.mk>
