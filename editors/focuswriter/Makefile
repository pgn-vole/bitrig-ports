# $OpenBSD: Makefile,v 1.5 2015/03/27 08:11:26 ajacoutot Exp $

BROKEN = 	needs work on bitrig

COMMENT =	simple, distraction-free writing environment

DISTNAME =	focuswriter-1.4.4
CATEGORIES =	editors
EXTRACT_SUFX =	-src.tar.bz2
REVISION=	2

HOMEPAGE =	http://gottcode.org/focuswriter/

MASTER_SITES =	${HOMEPAGE}

# GPLv3
PERMIT_PACKAGE_CDROM =	Yes

MODULES +=	devel/gettext
MODULES +=	x11/qt4
RUN_DEPENDS +=	devel/desktop-file-utils x11/gtk+3,-guic
LIB_DEPENDS +=	archivers/libzip textproc/enchant
WANTLIB +=	ICE SM X11 Xext Xi Xinerama Xrender fontconfig freetype
WANTLIB +=	QtNetwork enchant glib-2.0 gmodule-2.0 z
WANTLIB +=	QtGui c m pthread zip
WANTLIB +=	c++ c++abi pthread

MAKE_FLAGS +=	CXX=${CXX} \
		QMAKE_CXXFLAGS="${CXXFLAGS}"
FAKE_FLAGS +=	INSTALL_ROOT=${DESTDIR}

do-configure:
	cd ${WRKSRC} && ${SETENV} ${MAKE_ENV} ${CONFIGURE_ENV} ${LOCALBASE}/bin/qmake4

.include <bsd.port.mk>
