$OpenBSD: patch-virtManager_sshtunnels_py,v 1.2 2015/05/06 21:36:33 jasper Exp $

From ebcb7c064ca5a3afd2ec3a0c8f59328a7f71b009 Mon Sep 17 00:00:00 2001
From: Giuseppe Scrivano <gscrivan@redhat.com>
Date: Wed, 6 May 2015 12:52:40 +0200
Subject: sshtunnels: fix exception when the address is not an IP

--- virtManager/sshtunnels.py.orig	Mon May  4 18:26:13 2015
+++ virtManager/sshtunnels.py	Wed May  6 23:35:02 2015
@@ -48,10 +48,16 @@ class ConnectionInfo(object):
             self._connhost = "127.0.0.1"
 
     def _is_listen_localhost(self, host=None):
-        return ipaddr.IPNetwork(host or self.gaddr).is_loopback
+        try:
+            return ipaddr.IPNetwork(host or self.gaddr).is_loopback
+        except:
+            return False
 
     def _is_listen_any(self):
-        return ipaddr.IPNetwork(self.gaddr).is_unspecified
+        try:
+            return ipaddr.IPNetwork(self.gaddr).is_unspecified
+        except:
+            return False
 
     def need_tunnel(self):
         if not self._is_listen_localhost():
