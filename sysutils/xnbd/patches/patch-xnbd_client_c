--- xnbd_client.c.orig	Wed Jan 29 10:40:44 2014
+++ xnbd_client.c	Sun Apr 19 23:05:54 2015
@@ -24,7 +24,6 @@
 #include "xnbd.h"
 #include <sys/ioctl.h>
 #include <sys/reboot.h>
-#include <linux/fs.h>           /* for BLKRRPART */
 #include <assert.h>
 
 
@@ -445,12 +444,6 @@ static int xnbd_setup_client(const char *devpath, unsi
 			} else
 				break;
 		}
-
-		/*
-		 * re-read partition table.
-		 * this may fail if the kernel does not support it.
-		 **/
-		ioctl(nbd, BLKRRPART);
 
 		close(sockfd);
 		close(nbd);
