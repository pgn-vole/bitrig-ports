$OpenBSD: patch-libupower-glib_up-device_c,v 1.1 2015/03/27 16:03:33 ajacoutot Exp $

From 2510148b16a71504dff3880c8af416fd85a2885d Mon Sep 17 00:00:00 2001
From: Vlad Orlov <monsta@inbox.ru>
Date: Fri, 13 Mar 2015 13:17:31 +0100
Subject: lib: Fix crash on uninitialized variant

--- libupower-glib/up-device.c.orig	Tue May 20 14:24:12 2014
+++ libupower-glib/up-device.c	Fri Mar 27 14:54:03 2015
@@ -422,7 +422,7 @@ GPtrArray *
 up_device_get_history_sync (UpDevice *device, const gchar *type, guint timespec, guint resolution, GCancellable *cancellable, GError **error)
 {
 	GError *error_local = NULL;
-	GVariant *gva;
+	GVariant *gva = NULL;
 	guint i;
 	GPtrArray *array = NULL;
 	gboolean ret;
@@ -502,7 +502,7 @@ GPtrArray *
 up_device_get_statistics_sync (UpDevice *device, const gchar *type, GCancellable *cancellable, GError **error)
 {
 	GError *error_local = NULL;
-	GVariant *gva;
+	GVariant *gva = NULL;
 	guint i;
 	GPtrArray *array = NULL;
 	gboolean ret;
